---
// Home page route - renders the German home page content
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroBlock from '../components/blocks/HeroBlock.astro';
import ContentBlock from '../components/blocks/ContentBlock.astro';
import BookingBlock from '../components/blocks/BookingBlock.astro';
import FeatureGridBlock from '../components/blocks/FeatureGridBlock.astro';
import FullBleedBlock from '../components/blocks/FullBleedBlock.astro';
import InteractiveListBlock from '../components/blocks/InteractiveListBlock.astro';
import FaqBlock from '../components/blocks/FaqBlock.astro';
import BsportCalendar from '../components/integrations/BsportCalendar.astro';
import BsportPasses from '../components/integrations/BsportPasses.astro';
import BsportSubscription from '../components/integrations/BsportSubscription.astro';

// Get the home page from the content collection
const pages = await getCollection('pages');
const homePage = pages.find(page => page.id === 'de/home.md');
---

{homePage ? (
  <BaseLayout
    title={homePage.data.title}
    seoDescription={homePage.data.seoDescription}
    ogImage={homePage.data.ogImage}
    deSlug=""
    enSlug=""
  >
    {homePage.data.blocks?.map((block) => {
      switch (block._template) {
        case 'HeroBlock':
          return <HeroBlock {...block} />;
        case 'ContentBlock':
          return <ContentBlock {...block} />;
        case 'BookingBlock':
          return <BookingBlock {...block} />;
        case 'FeatureGridBlock':
          return <FeatureGridBlock {...block} />;
        case 'FullBleedBlock':
          return <FullBleedBlock {...block} />;
        case 'InteractiveListBlock':
          return <InteractiveListBlock {...block} />;
        case 'FaqBlock':
          return <FaqBlock {...block} />;
        case 'BsportCalendar': {
          const { _template: _t1, name: _n1, ...calProps } = block;
          return <BsportCalendar {...calProps} />;
        }
        case 'BsportPasses': {
          const { _template: _t2, name: _n2, ...passProps } = block;
          return <BsportPasses {...passProps} />;
        }
        case 'BsportSubscription': {
          const { _template: _t3, name: _n3, ...subProps } = block;
          return <BsportSubscription {...subProps} />;
        }
        default:
          return null;
      }
    })}
  </BaseLayout>
) : (
  <BaseLayout title="EOS CLUB" seoDescription="Yoga & Wellness Studio in Berlin">
    <div class="container mx-auto px-6 py-12">
      <h1 class="font-serif text-4xl text-eos-accent">Willkommen bei EOS CLUB</h1>
      <p class="mt-4 text-eos-contrast/80">Dein Raum f√ºr Yoga, Bewegung und innere Balance.</p>
    </div>
  </BaseLayout>
)}
